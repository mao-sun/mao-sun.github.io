<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mao的旅行攻略</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * { 
            margin: 0; padding: 0; box-sizing: border-box; 
            font-family: 'Noto Sans SC', sans-serif;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        input, button, textarea {
            -webkit-user-select: auto;
            -moz-user-select: auto;
            -ms-user-select: auto;
            user-select: auto;
        }
        
        body { 
            background: linear-gradient(135deg, #e6f0ff 0%, #d9e7ff 100%); 
            color: #333; line-height: 1.6; min-height: 100vh; 
            padding-bottom: 100px;
        }
        
        .container { max-width: 1200px; margin: 0 auto; padding: 0 10px; }
        
        header { 
            text-align: center; padding: 30px 15px; 
            background: linear-gradient(135deg, #4b6cb7, #3a5795);
            color: white; 
            position: relative;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-radius: 0 0 15px 15px;
        }
        
        h1 { 
            font-size: 2.5rem; margin-bottom: 12px; 
            font-weight: 700;
            letter-spacing: 1px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .subtitle { 
            font-size: 1.2rem; opacity: 0.9; max-width: 700px; margin: 0 auto; 
            font-weight: 300;
        }
        
        .search-container { 
            max-width: 700px; margin: 25px auto; position: relative; 
            display: flex; align-items: center; 
            background: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-radius: 50px;
            overflow: hidden;
        }
        
        .search-box { 
            width: 100%; padding: 16px 60px 16px 55px; border: none; 
            font-size: 1.1rem; transition: all 0.3s ease; 
            background: white; height: 55px; 
        }
        
        .search-box:focus { 
            outline: none; 
            background: #f8faff;
        }
        
        .search-icon { 
            position: absolute; left: 22px; top: 50%; transform: translateY(-50%); 
            color: #4b6cb7; font-size: 1.3rem; 
        }
        
        .search-btn { 
            position: absolute; right: 12px; background: #4b6cb7; color: white; border: none; 
            border-radius: 50%; width: 42px; height: 42px; cursor: pointer; transition: all 0.3s ease; 
            display: flex; align-items: center; justify-content: center; 
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }
        
        .search-btn:hover { background: #3a5ba0; transform: scale(1.1); }
        
        .suggestions-container { 
            position: absolute; top: 100%; left: 0; right: 0; background: white; 
            border-radius: 0 0 15px 15px; 
            max-height: 300px; overflow-y: auto; z-index: 1000; margin-top: 5px; display: none; 
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
            border: 1px solid #e0e9ff;
        }
        
        .suggestion-item { 
            padding: 12px 20px; cursor: pointer; display: flex; justify-content: space-between; 
            align-items: center; transition: background 0.2s; border-bottom: 1px solid #f0f0f0; 
        }
        
        .suggestion-item:hover { background-color: #f5f8ff; }
        .suggestion-name { font-weight: 600; }
        .suggestion-en { font-style: italic; color: #6c757d; font-size: 0.9rem; }
        .highlight-text { 
            background-color: #ffeaa7; color: #d35400; padding: 0 2px; border-radius: 3px; 
        }
        
        /* 新的双栏布局 */
        .two-columns {
            display: flex;
            gap: 25px;
            margin-bottom: 30px;
            margin-top: 15px;
        }
        
        .two-columns > div {
            flex: 1;
        }
        
        .region-section { 
            background: white; border-radius: 15px; overflow: hidden; 
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08); 
            display: flex;
            flex-direction: column;
        }
        
        .card-header { 
            padding: 25px; color: white; text-align: center; 
            display: flex; justify-content: center; align-items: center;
            position: relative;
        }
        
        .card-header h2 { 
            width: 100%; text-align: center; 
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            font-weight: 600;
        }
        
        .map-icon {
            font-size: 2.2rem;
            color: #ffd43b;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .china-header { 
            background: linear-gradient(135deg, #3a5795, #2a5298); 
        }
        .international-header { 
            background: linear-gradient(135deg, #2a5298, #1a4288); 
        }
        
        .card-content { padding: 25px 20px; flex: 1; }
        h3 { 
            margin-bottom: 20px; font-size: 1.4rem; color: #2c3e50; 
            padding-bottom: 10px; display: flex; align-items: center; 
            border-bottom: 2px solid #f0f3f5;
            font-weight: 600;
        }
        
        h3 i { margin-right: 12px; color: #3498db; }
        
        .area-grid, .region-content { 
            display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); 
            gap: 16px; 
        }
        
        .area-item { 
            padding: 14px; 
            background: #f8faff; 
            border-radius: 8px; cursor: pointer; transition: all 0.25s ease; 
            display: flex; flex-direction: column; 
            border: 1px solid #e0e9ff; height: 100%; justify-content: center; align-items: center; 
            text-align: center; min-height: 65px; 
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.03);
            position: relative;
        }
        
        .area-item:hover { 
            background: #eef4ff; 
            transform: translateY(-3px); 
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
        }
        
        .area-item span { font-size: 1.1rem; }
        .country-name { font-weight: 700; color: #2a5298; }
        .country-en { font-size: 0.9rem; color: #6c757d; font-style: italic; margin-top: 4px; }
        
        .country-name, .country-en {
            display: block;
        }
        
        .country-en {
            margin-top: 5px;
        }
        
        .region-header { 
            background: #f0f5ff; padding: 14px 18px; 
            border-radius: 8px; margin-top: 20px; margin-bottom: 10px; font-weight: bold; 
            display: flex; align-items: center; cursor: pointer; transition: all 0.25s ease; 
            font-size: 1.2rem; 
            border: 1px solid #d0e0ff;
        }
        
        .region-header:hover { 
            background: #e6f0ff; 
        }
        
        .region-header i { margin-right: 12px; transition: transform 0.3s ease; color: #4b6cb7; }
        .region-header.collapsed i { transform: rotate(-90deg); }
        .region-content.collapsed { display: none; }
        
        footer { 
            text-align: center; padding: 25px; color: #6c757d; font-size: 0.95rem; 
            background: white; border-radius: 10px; 
            max-width: 1200px; margin: 25px auto; 
            border: 1px solid #e0e9ff;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        .highlight { 
            background: #fff8e1 !important; 
            animation: pulse 1.5s 3; border: 2px solid #ffd43b !important; 
        }
        
        .match-highlight {
            background: #e3f2fd !important;
            border: 2px solid #3b82f6 !important;
        }
        
        @keyframes pulse { 
            0% { transform: scale(1); } 
            50% { transform: scale(1.02); } 
            100% { transform: scale(1); } 
        }
        
        .region-intro { 
            text-align: center; max-width: 800px; margin: 0 auto 25px; 
            font-size: 1rem; color: #495057; line-height: 1.7; 
        }
        
        .vertical-region-list { display: flex; flex-direction: column; gap: 12px; }
        
        /* 按钮容器 - 修改为相对定位 */
        .floating-buttons {
            position: fixed;
            bottom: 25px;
            right: 25px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 2000;
        }
        
        .floating-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            color: white;
            font-size: 1.2rem;
            position: relative;
            background: linear-gradient(90deg, #006994, #bc2d29);
        }
        
        .floating-btn:hover {
            background: linear-gradient(90deg, #bc2d29, #006994);
            transform: scale(1.1);
        }
        
        /* 完成状态标记 - 红蓝渐变 */
        .completed-badge {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 20px;
            height: 20px;
            background: linear-gradient(90deg, #006994, #bc2d29);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.7rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            animation: pulse 2s infinite;
        }
        
        .completed-badge i {
            font-size: 0.9rem;
        }
        
        /* 提示框 - 重新设计定位 */
        .hint-panel {
            position: absolute;
            bottom: calc(100% + 15px); /* 固定在按钮上方 */
            right: 0;
            background: linear-gradient(90deg, #006994, #bc2d29);
            color: white;
            padding: 15px 20px;
            border-radius: 15px;
            z-index: 2001;
            width: 250px;
            font-size: 1rem;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
            gap: 12px;
            line-height: 1.5;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.4s ease;
            pointer-events: none;
            border: none;
        }
        
        .hint-panel.show {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }
        
        .hint-panel::after {
            content: '';
            position: absolute;
            bottom: -12px;
            right: 20px;
            width: 0;
            height: 0;
            border-left: 12px solid transparent;
            border-right: 12px solid transparent;
            border-top: 12px solid #bc2d29;
        }
        
        .hint-line {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }
        
        .hint-icon {
            font-size: 1.3rem;
            min-width: 25px;
            text-align: center;
            color: #ffd43b;
            flex-shrink: 0;
            padding-top: 3px;
        }
        
        .hint-text {
            flex: 1;
        }
        
        /* 移动设备优化 */
        @media (max-width: 768px) {
            body {
                padding: 0;
            }
            
            .container {
                padding: 0;
            }
            
            header {
                padding: 20px 15px;
                border-radius: 0;
                box-shadow: none;
                margin-bottom: 0;
            }
            
            .search-container {
                max-width: 100%;
                border-radius: 0;
                box-shadow: none;
                border-top: 1px solid #e0e9ff;
                border-bottom: 1px solid #e0e9ff;
                margin: 0;
                border-radius: 0;
            }
            
            .search-box {
                border-radius: 0;
                padding: 14px 50px 14px 45px;
            }
            
            .two-columns {
                flex-direction: column;
                gap: 0;
                margin-top: 0;
                margin-bottom: 0;
            }
            
            .region-section {
                border-radius: 0;
                box-shadow: none;
                border-bottom: 1px solid #e0e9ff;
                border-top: none;
            }
            
            .region-section:first-child {
                border-top: none;
            }
            
            .region-section:last-child {
                border-bottom: none;
            }
            
            .card-header {
                padding: 20px 15px;
            }
            
            .card-content {
                padding: 20px 15px;
            }
            
            h1 { 
                font-size: 1.8rem;
            }
            
            .subtitle { 
                font-size: 1rem;
                padding: 0 10px;
            }
            
            .search-box { 
                font-size: 1rem; 
                height: 50px; 
            }
            
            .card-header h2 { 
                font-size: 1.5rem;
            }
            
            .map-icon {
                font-size: 1.8rem;
            }
            
            .search-icon { 
                left: 18px; 
                font-size: 1.2rem; 
            }
            
            .search-btn { 
                width: 38px; 
                height: 38px; 
                right: 8px; 
                font-size: 0.9rem; 
            }
            
            h3 { 
                font-size: 1.25rem; 
                margin-bottom: 15px; 
            }
            
            .area-grid, .region-content { 
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); 
                gap: 12px; 
            }
            
            .area-item { 
                padding: 12px; 
                min-height: 60px; 
            }
            
            .area-item span { 
                font-size: 1rem; 
            }
            
            .country-name { 
                font-size: 1rem; 
            }
            
            .country-en { 
                font-size: 0.8rem; 
            }
            
            .region-header { 
                padding: 12px 16px; 
                font-size: 1.1rem; 
                margin-top: 15px;
                margin-bottom: 8px;
            }
            
            .region-intro { 
                font-size: 0.95rem; 
                margin-bottom: 20px; 
            }
            
            .floating-buttons {
                bottom: 15px;
                right: 15px;
                gap: 12px;
            }
            
            .floating-btn {
                width: 42px;
                height: 42px;
                font-size: 1.1rem;
            }
            
            .hint-panel {
                bottom: calc(100% + 12px);
                width: 220px;
                font-size: 0.95rem;
                padding: 12px 15px;
            }
            
            .hint-panel::after {
                right: 15px;
            }
            
            footer { 
                padding: 20px 15px; 
                font-size: 0.9rem; 
                margin: 0;
                border-radius: 0;
                box-shadow: none;
                border-top: 1px solid #e0e9ff;
            }
            
            .suggestion-item { 
                padding: 10px 15px; 
            }
            
            .suggestion-en { 
                margin-top: 5px; 
                font-size: 0.85rem; 
            }
        }
        
        @media (max-width: 480px) {
            h1 { 
                font-size: 1.6rem; 
            }
            
            .subtitle { 
                font-size: 0.95rem; 
            }
            
            .search-box { 
                padding: 12px 45px 12px 40px; 
                height: 48px; 
                font-size: 0.95rem; 
            }
            
            .card-header { 
                padding: 18px 15px; 
            }
            
            .card-header h2 { 
                font-size: 1.4rem; 
            }
            
            .area-grid, .region-content { 
                grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); 
                gap: 10px; 
            }
            
            .area-item { 
                padding: 10px 8px; 
                min-height: 55px; 
            }
            
            .area-item span { 
                font-size: 0.95rem; 
            }
            
            .region-header { 
                padding: 10px 14px; 
                font-size: 1rem; 
                margin-top: 12px;
                margin-bottom: 6px;
            }
            
            h3 { 
                font-size: 1.15rem; 
            }
            
            .country-name { 
                font-size: 0.95rem; 
            }
            
            .country-en { 
                font-size: 0.75rem; 
            }
            
            .region-intro { 
                font-size: 0.9rem; 
                margin-bottom: 15px; 
            }
            
            footer { 
                padding: 15px; 
                font-size: 0.85rem; 
            }
            
            .floating-buttons {
                gap: 10px;
            }
            
            .floating-btn {
                width: 38px;
                height: 38px;
                font-size: 1rem;
            }
            
            .hint-panel {
                bottom: calc(100% + 10px);
                right: 0;
                width: 200px;
                font-size: 0.9rem;
                padding: 10px 12px;
            }
            
            .hint-panel::after {
                right: 10px;
            }
            
            .hint-icon {
                font-size: 1.2rem;
            }
        }
        
        @media (max-width: 360px) {
            .area-grid, .region-content { 
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); 
            }
            
            .search-box { 
                padding: 10px 40px 10px 35px; 
                height: 46px; 
                font-size: 0.9rem; 
            }
        }
        
        /* 添加卡片动画 */
        .region-section {
            animation: fadeIn 0.5s ease-out;
            transform-origin: top;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* 添加加载动画 */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(59, 130, 246, 0.2);
            border-radius: 50%;
            border-top: 5px solid #3b82f6;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* 添加搜索按钮加载动画 */
        .search-btn.loading i {
            animation: spin 1s linear infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Mao的旅行攻略</h1>
            <p class="subtitle">记录生活 - 定格与你的每段旅程</p>
        </header>

        <div class="search-container">
            <i class="fas fa-search search-icon"></i>
            <input type="text" class="search-box" id="searchInput" placeholder="搜索省份、国家或地区...">
            <button class="search-btn" id="searchButton">
                <i class="fas fa-search"></i>
            </button>
            <div class="suggestions-container" id="suggestionsContainer"></div>
        </div>
        
        <!-- 双栏布局容器 -->
        <div class="two-columns">
            <!-- 中国区域部分 -->
            <div class="region-section">
                <div class="card-header china-header">
                    <h2>
                        <div class="map-icon">
                            <i class="fas fa-map-marked-alt"></i>
                        </div>
                        中国
                    </h2>
                </div>
                <div class="card-content">
                    <div class="region-intro">
                        <p>中国拥有丰富的自然景观和悠久的历史文化，从壮丽山河到现代都市，从古老文明到多元风情，探索这片神奇的土地，开启一段难忘的旅程</p>
                    </div>
                    
                    <h3><i class="fas fa-layer-group"></i> 按区域浏览</h3>
                    
                    <div class="vertical-region-list">
                        <!-- 合并的华北-东北地区 -->
                        <div class="region-header" data-region="northNortheastChina">
                            <i class="fas fa-chevron-down"></i>
                            <span>华北-东北地区</span>
                        </div>
                        <div class="region-content" id="northNortheastChinaContent"></div>
                        
                        <!-- 华东地区 -->
                        <div class="region-header" data-region="eastChina">
                            <i class="fas fa-chevron-down"></i>
                            <span>华东地区</span>
                        </div>
                        <div class="region-content" id="eastChinaContent"></div>
                        
                        <!-- 合并的华中-华南地区 -->
                        <div class="region-header" data-region="centralSouthChina">
                            <i class="fas fa-chevron-down"></i>
                            <span>华中-华南地区</span>
                        </div>
                        <div class="region-content" id="centralSouthChinaContent"></div>
                        
                        <!-- 西南地区 -->
                        <div class="region-header" data-region="southwestChina">
                            <i class="fas fa-chevron-down"></i>
                            <span>西南地区</span>
                        </div>
                        <div class="region-content" id="southwestChinaContent"></div>
                        
                        <!-- 西北地区 -->
                        <div class="region-header" data-region="northwestChina">
                            <i class="fas fa-chevron-down"></i>
                            <span>西北地区</span>
                        </div>
                        <div class="region-content" id="northwestChinaContent"></div>
                        
                        <!-- 港澳台地区 -->
                        <div class="region-header" data-region="hmtChina">
                            <i class="fas fa-chevron-down"></i>
                            <span>港澳台地区</span>
                        </div>
                        <div class="region-content" id="hmtChinaContent"></div>
                    </div>
                </div>
            </div>
            
            <!-- 境外区域部分 -->
            <div class="region-section">
                <div class="card-header international-header">
                    <h2>
                        <div class="map-icon">
                            <i class="fas fa-passport"></i>
                        </div>
                        境外及港澳台
                    </h2>
                </div>
                <div class="card-content">
                    <div class="region-intro">
                        <p>探索世界各地的异国风情，从古老的历史遗迹到现代都市风光，从热带雨林到极地冰川，让每一次旅行都成为一次难忘的冒险</p>
                    </div>
                    
                    <h3><i class="fas fa-globe"></i> 按大洲浏览（仅展示部分国家和地区）</h3>
                    
                    <div class="vertical-region-list">
                        <!-- 大洲列表 -->
                        <div class="region-header" data-region="asia">
                            <i class="fas fa-chevron-down"></i>
                            <span>亚洲 (Asia)</span>
                        </div>
                        <div class="region-content" id="asiaContent"></div>
                        
                        <div class="region-header" data-region="europe">
                            <i class="fas fa-chevron-down"></i>
                            <span>欧洲 (Europe)</span>
                        </div>
                        <div class="region-content" id="europeContent"></div>
                        
                        <div class="region-header" data-region="northAmerica">
                            <i class="fas fa-chevron-down"></i>
                            <span>北美洲 (North America)</span>
                        </div>
                        <div class="region-content" id="northAmericaContent"></div>
                        
                        <div class="region-header" data-region="southAmerica">
                            <i class="fas fa-chevron-down"></i>
                            <span>南美洲 (South America)</span>
                        </div>
                        <div class="region-content" id="southAmericaContent"></div>
                        
                        <div class="region-header" data-region="oceania">
                            <i class="fas fa-chevron-down"></i>
                            <span>大洋洲 (Oceania)</span>
                        </div>
                        <div class="region-content" id="oceaniaContent"></div>
                        
                        <div class="region-header" data-region="africa">
                            <i class="fas fa-chevron-down"></i>
                            <span>非洲 (Africa)</span>
                        </div>
                        <div class="region-content" id="africaContent"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>© 2025 环球旅行攻略 | 探索世界，分享旅程</p>
            <p><i class="fas fa-sync-alt"></i> 数据由个人整理 | <i class="fas fa-heart"></i> 让旅行改变生活</p>
            <p>本站所有内容均来自网络 | 如有侵权电邮 mao.sun@foxmail.com</p>
        </footer>
    </div>

    <!-- 浮动按钮容器 -->
    <div class="floating-buttons">
        <!-- 提示框 -->
        <div class="hint-panel" id="hintPanel">
            <div class="hint-line">
                <div class="hint-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="hint-text">打勾为攻略已完成</div>
            </div>
            <div class="hint-line">
                <div class="hint-icon">
                    <i class="fas fa-lightbulb"></i>
                </div>
                <div class="hint-text">其他地区也有惊喜哦</div>
            </div>
        </div>
        
        <!-- 提示按钮 -->
        <div class="hint-btn floating-btn" id="hintBtn">
            <i class="fas fa-info"></i>
        </div>
        
        <!-- 折叠/展开按钮 -->
        <div class="collapse-expand-btn floating-btn" id="collapseExpandBtn">
            <i class="fas fa-compress-alt"></i>
        </div>
        
        <!-- 回到顶部按钮 -->
        <div class="back-to-top floating-btn" id="backToTop">
            <i class="fas fa-arrow-up"></i>
        </div>
    </div>

    <script>
        // 已完成的中国省份
        const completedChinaProvinces = ["北京市", "江苏省",, "香港特别行政区"];
        
        // 中国省份按区域划分（已合并区域）
        const chinaRegions = {
            northNortheastChina: ["北京市", "天津市", "河北省", "山西省", "内蒙古自治区", "辽宁省", "吉林省", "黑龙江省"],
            eastChina: ["上海市", "江苏省", "浙江省", "安徽省", "福建省", "江西省", "山东省"],
            centralSouthChina: ["河南省", "湖北省", "湖南省", "广东省", "广西壮族自治区", "海南省"],
            southwestChina: ["重庆市", "四川省", "贵州省", "云南省", "西藏自治区"],
            northwestChina: ["陕西省", "甘肃省", "青海省", "宁夏回族自治区", "新疆维吾尔自治区"],
            hmtChina: ["香港特别行政区", "澳门特别行政区", "台湾省"]
        };

        // 境外国家数据（按大洲分类）
        const countries = {
            asia: [
                {name: "日本", en: "Japan", completed: true},
                {name: "韩国", en: "South Korea", completed: false},
                {name: "越南", en: "Vietnam", completed: true},
                {name: "泰国", en: "Thailand", completed: false},
                {name: "新加坡", en: "Singapore", completed: false},
                {name: "马来西亚", en: "Malaysia", completed: false},
                {name: "印度尼西亚", en: "Indonesia", completed: false},
                {name: "菲律宾", en: "Philippines", completed: false},
                {name: "柬埔寨", en: "Cambodia", completed: false},
                {name: "老挝", en: "Laos", completed: false},
                {name: "斯里兰卡", en: "Sri Lanka", completed: false},
                {name: "马尔代夫", en: "Maldives", completed: false},
                {name: "阿联酋", en: "United Arab Emirates", completed: false},
                {name: "土耳其", en: "Turkey", completed: false},
                {name: "中国香港", en: "Hong Kong, China", completed: true},
                {name: "中国澳门", en: "Macao, China", completed: false},
                {name: "中国台湾", en: "Taiwan, China", completed: false}
            ],
            europe: [
                {name: "英国", en: "United Kingdom", completed: false},
                {name: "法国", en: "France", completed: false},
                {name: "德国", en: "Germany", completed: false},
                {name: "意大利", en: "Italy", completed: false},
                {name: "西班牙", en: "Spain", completed: false},
                {name: "葡萄牙", en: "Portugal", completed: false},
                {name: "荷兰", en: "Netherlands", completed: false},
                {name: "比利时", en: "Belgium", completed: false},
                {name: "瑞士", en: "Switzerland", completed: false},
                {name: "奥地利", en: "Austria", completed: false},
                {name: "希腊", en: "Greece", completed: false},
                {name: "冰岛", en: "Iceland", completed: false},
                {name: "挪威", en: "Norway", completed: false},
                {name: "瑞典", en: "Sweden", completed: false},
                {name: "丹麦", en: "Denmark", completed: false},
                {name: "芬兰", en: "Finland", completed: false},
                {name: "俄罗斯", en: "Russia", completed: false},
                {name: "捷克", en: "Czech Republic", completed: false},
                {name: "匈牙利", en: "Hungary", completed: false},
                {name: "波兰", en: "Poland", completed: false}
            ],
            northAmerica: [
                {name: "美国", en: "United States", completed: false},
                {name: "加拿大", en: "Canada", completed: false},
                {name: "墨西哥", en: "Mexico", completed: false},
                {name: "古巴", en: "Cuba", completed: false},
                {name: "哥斯达黎加", en: "Costa Rica", completed: false},
                {name: "巴拿马", en: "Panama", completed: false}
            ],
            southAmerica: [
                {name: "巴西", en: "Brazil", completed: false},
                {name: "阿根廷", en: "Argentina", completed: false},
                {name: "智利", en: "Chile", completed: false},
                {name: "秘鲁", en: "Peru", completed: false},
                {name: "哥伦比亚", en: "Colombia", completed: false}
            ],
            oceania: [
                {name: "澳大利亚", en: "Australia", completed: false},
                {name: "新西兰", en: "New Zealand", completed: false},
                {name: "斐济", en: "Fiji", completed: false},
                {name: "萨摩亚", en: "Samoa", completed: false},
                {name: "汤加", en: "Tonga", completed: false},
                {name: "法属波利尼西亚", en: "French Polynesia", completed: false}
            ],
            africa: [
                {name: "埃及", en: "Egypt", completed: false},
                {name: "南非", en: "South Africa", completed: false},
                {name: "肯尼亚", en: "Kenya", completed: false},
                {name: "摩洛哥", en: "Morocco", completed: false},
                {name: "坦桑尼亚", en: "Tanzania", completed: false}
            ]
        };

        // 所有目的地数据集合（用于搜索建议）
        let allDestinations = [];
        
        // 省份中文名到英文名的映射
        const provinceEnMap = {
            "北京市": "Beijing",
            "天津市": "Tianjin",
            "河北省": "Hebei",
            "山西省": "Shanxi",
            "内蒙古自治区": "InnerMongolia",
            "辽宁省": "Liaoning",
            "吉林省": "Jilin",
            "黑龙江省": "Heilongjiang",
            "上海市": "Shanghai",
            "江苏省": "Jiangsu",
            "浙江省": "Zhejiang",
            "安徽省": "Anhui",
            "福建省": "Fujian",
            "江西省": "Jiangxi",
            "山东省": "Shandong",
            "河南省": "Henan",
            "湖北省": "Hubei",
            "湖南省": "Hunan",
            "广东省": "Guangdong",
            "广西壮族自治区": "Guangxi",
            "海南省": "Hainan",
            "重庆市": "Chongqing",
            "四川省": "Sichuan",
            "贵州省": "Guizhou",
            "云南省": "Yunnan",
            "西藏自治区": "Tibet",
            "陕西省": "Shaanxi",
            "甘肃省": "Gansu",
            "青海省": "Qinghai",
            "宁夏回族自治区": "Ningxia",
            "新疆维吾尔自治区": "Xinjiang",
            "香港特别行政区": "HongKong",
            "澳门特别行政区": "Macao",
            "台湾省": "Taiwan"
        };

        // 省份到原始区域的映射
        const provinceRegionMap = {
            "北京市": "NorthChina",
            "天津市": "NorthChina",
            "河北省": "NorthChina",
            "山西省": "NorthChina",
            "内蒙古自治区": "NorthChina",
            "辽宁省": "NortheastChina",
            "吉林省": "NortheastChina",
            "黑龙江省": "NortheastChina",
            "上海市": "EastChina",
            "江苏省": "EastChina",
            "浙江省": "EastChina",
            "安徽省": "EastChina",
            "福建省": "EastChina",
            "江西省": "EastChina",
            "山东省": "EastChina",
            "河南省": "CentralChina",
            "湖北省": "CentralChina",
            "湖南省": "CentralChina",
            "广东省": "SouthChina",
            "广西壮族自治区": "SouthChina",
            "海南省": "SouthChina",
            "重庆市": "SouthwestChina",
            "四川省": "SouthwestChina",
            "贵州省": "SouthwestChina",
            "云南省": "SouthwestChina",
            "西藏自治区": "SouthwestChina",
            "陕西省": "NorthwestChina",
            "甘肃省": "NorthwestChina",
            "青海省": "NorthwestChina",
            "宁夏回族自治区": "NorthwestChina",
            "新疆维吾尔自治区": "NorthwestChina",
            "香港特别行政区": "China",
            "澳门特别行政区": "China",
            "台湾省": "China"
        };

        // 大洲ID到英文名的映射
        const continentMap = {
            asia: "Asia",
            europe: "Europe",
            northAmerica: "NorthAmerica",
            southAmerica: "SouthAmerica",
            oceania: "Oceania",
            africa: "Africa"
        };

        // 高亮匹配文本
        function highlightMatch(text, query) {
            if (!query) return text;
            const regex = new RegExp(`(${query})`, 'gi');
            return text.replace(regex, '<span class="highlight-text">$1</span>');
        }

        // 初始化页面内容
        function initPage() {
            // 渲染中国区域省份
            for (const region in chinaRegions) {
                const contentElement = document.getElementById(`${region}Content`);
                if (contentElement) {
                    chinaRegions[region].forEach(province => {
                        const item = document.createElement('div');
                        item.className = 'area-item';
                        
                        // 获取省份的原始区域和英文名
                        const regionPrefix = provinceRegionMap[province];
                        const provinceEn = provinceEnMap[province];
                        
                        // 生成链接
                        let link = `${regionPrefix}-${provinceEn}.html`;
                        
                        // 创建链接
                        item.innerHTML = `<a href="${link}" style="text-decoration: none; color: inherit;"><span>${province}</span></a>`;
                        item.dataset.name = province;
                        contentElement.appendChild(item);
                        
                        // 添加完成状态标记（中国省份）
                        if (completedChinaProvinces.includes(province)) {
                            const badge = document.createElement('div');
                            badge.className = 'completed-badge';
                            badge.innerHTML = '<i class="fas fa-check"></i>';
                            item.appendChild(badge);
                        }
                        
                        // 添加到所有目的地集合
                        allDestinations.push({
                            name: province,
                            en: null,
                            type: 'china',
                            element: item,
                            completed: completedChinaProvinces.includes(province)
                        });
                    });
                }
            }

            // 渲染各大洲国家
            for (const continent in countries) {
                const contentElement = document.getElementById(`${continent}Content`);
                if (contentElement) {
                    countries[continent].forEach(country => {
                        const countryElement = document.createElement('div');
                        countryElement.className = 'area-item';

                        // 确定链接
                        let link;
                        let countryEnName;
                        
                        // 处理港澳台地区
                        if (["中国香港", "中国澳门", "中国台湾"].includes(country.name)) {
                            const regionName = country.name.replace("中国", "").trim();
                            countryEnName = provinceEnMap[`${regionName}${regionName === "台湾" ? "省" : "特别行政区"}`];
                            link = `China-${countryEnName}.html`;
                        } else {
                            // 处理其他国家
                            countryEnName = country.en.replace(/,/g, '').replace(/\s+/g, '-');
                            link = `${continentMap[continent]}-${countryEnName}.html`;
                        }
                        
                        // 创建国家/地区HTML
                        const countryHtml = `
                            <a href="${link}" style="text-decoration: none; color: inherit;">
                                <span class="country-name">${country.name}</span>
                                <span class="country-en">${country.en}</span>
                            </a>
                        `;
                        
                        countryElement.innerHTML = countryHtml;
                        countryElement.dataset.name = `${country.name}|${country.en}`;
                        contentElement.appendChild(countryElement);
                        
                        // 添加完成状态标记
                        if (country.completed) {
                            const badge = document.createElement('div');
                            badge.className = 'completed-badge';
                            badge.innerHTML = '<i class="fas fa-check"></i>';
                            countryElement.appendChild(badge);
                        }
                        
                        // 添加到所有目的地集合
                        allDestinations.push({
                            name: country.name,
                            en: country.en,
                            type: 'international',
                            element: countryElement,
                            completed: country.completed
                        });
                    });
                }
            }

            // 添加事件监听器
            addEventListeners();
            // 初始化折叠状态
            initCollapseState();
            
            // 初始显示提示框
            const hintPanel = document.getElementById('hintPanel');
            hintPanel.classList.add('show');
            
            // 5秒后隐藏提示框
            setTimeout(() => {
                hintPanel.classList.remove('show');
            }, 5000);
        }

        // 初始化折叠状态
        function initCollapseState() {
            document.querySelectorAll('.region-header').forEach(header => {
                header.classList.add('collapsed');
                const content = document.getElementById(`${header.dataset.region}Content`);
                if (content) {
                    content.classList.add('collapsed');
                    const icon = header.querySelector('i');
                    if (header.classList.contains('collapsed')) {
                        icon.style.transform = 'rotate(-90deg)';
                    }
                }
            });
        }

        // 展开区域
        function expandRegion(element) {
            // 找到最近的区域内容
            let regionContent = element.closest('.region-content');
            if (!regionContent) return;
            
            // 找到对应的区域标题
            const regionId = regionContent.id.replace('Content', '');
            const regionHeader = document.querySelector(`.region-header[data-region="${regionId}"]`);
            
            if (regionHeader && regionHeader.classList.contains('collapsed')) {
                // 展开区域
                regionHeader.classList.remove('collapsed');
                regionContent.classList.remove('collapsed');
                
                // 更新图标方向
                const icon = regionHeader.querySelector('i');
                icon.style.transform = 'rotate(0deg)';
            }
        }

        // 清除所有高亮
        function clearAllHighlights() {
            document.querySelectorAll('.highlight').forEach(el => {
                el.classList.remove('highlight');
            });
            document.querySelectorAll('.match-highlight').forEach(el => {
                el.classList.remove('match-highlight');
            });
        }

        // 添加事件监听器
        function addEventListeners() {
            const searchInput = document.getElementById('searchInput');
            const searchButton = document.getElementById('searchButton');
            const suggestionsContainer = document.getElementById('suggestionsContainer');
            const collapseExpandBtn = document.getElementById('collapseExpandBtn');
            const backToTopBtn = document.getElementById('backToTop');
            const hintBtn = document.getElementById('hintBtn');
            const hintPanel = document.getElementById('hintPanel');
            let hintTimeout;
            
            // 输入时显示搜索建议并高亮匹配项
            searchInput.addEventListener('input', function() {
                const query = this.value.trim().toLowerCase();
                suggestionsContainer.innerHTML = '';
                
                if (query.length === 0) {
                    suggestionsContainer.style.display = 'none';
                    // 清除所有匹配高亮
                    document.querySelectorAll('.match-highlight').forEach(el => {
                        el.classList.remove('match-highlight');
                    });
                    return;
                }
                
                // 过滤匹配的目的地
                const matches = allDestinations.filter(dest => {
                    return (
                        (dest.name && dest.name.toLowerCase().includes(query)) ||
                        (dest.en && dest.en.toLowerCase().includes(query))
                    );
                });
                
                // 显示建议
                if (matches.length > 0) {
                    matches.forEach(dest => {
                        const suggestion = document.createElement('div');
                        suggestion.className = 'suggestion-item';
                        
                        // 高亮匹配文本
                        const highlightedName = highlightMatch(dest.name, query);
                        let highlightedEn = '';
                        
                        if (dest.en) {
                            highlightedEn = highlightMatch(dest.en, query);
                        }
                        
                        suggestion.innerHTML = `
                            <div class="suggestion-name">${highlightedName}</div>
                            ${dest.en ? `<div class="suggestion-en">${highlightedEn}</div>` : ''}
                        `;
                        
                        suggestion.addEventListener('click', function() {
                            // 设置搜索框内容
                            searchInput.value = dest.name;
                            
                            // 清除所有高亮
                            clearAllHighlights();
                            
                            // 添加高亮
                            dest.element.classList.add('highlight');
                            
                            // 展开所在区域
                            expandRegion(dest.element);
                            
                            // 滚动到该元素
                            scrollToElement(dest.element);
                            
                            // 3秒后移除高亮
                            setTimeout(() => {
                                dest.element.classList.remove('highlight');
                            }, 3000);
                            
                            // 隐藏建议框
                            suggestionsContainer.style.display = 'none';
                        });
                        
                        suggestionsContainer.appendChild(suggestion);
                    });
                    
                    suggestionsContainer.style.display = 'block';
                } else {
                    suggestionsContainer.style.display = 'none';
                }
                
                // 高亮所有匹配项
                document.querySelectorAll('.match-highlight').forEach(el => {
                    el.classList.remove('match-highlight');
                });
                
                matches.forEach(dest => {
                    dest.element.classList.add('match-highlight');
                });
            });
            
            // 点击其他地方关闭建议框
            document.addEventListener('click', function(e) {
                if (!searchInput.contains(e.target) && 
                    !suggestionsContainer.contains(e.target) &&
                    !searchButton.contains(e.target)) {
                    suggestionsContainer.style.display = 'none';
                }
            });
            
            // 区域折叠/展开功能
            document.querySelectorAll('.region-header').forEach(header => {
                header.addEventListener('click', function() {
                    const content = document.getElementById(`${this.dataset.region}Content`);
                    if (!content) return;
                    
                    // 切换折叠状态
                    this.classList.toggle('collapsed');
                    content.classList.toggle('collapsed');
                    
                    // 更新图标方向
                    const icon = this.querySelector('i');
                    if (this.classList.contains('collapsed')) {
                        icon.style.transform = 'rotate(-90deg)';
                    } else {
                        icon.style.transform = 'rotate(0deg)';
                    }
                });
            });

            // 搜索功能
            searchButton.addEventListener('click', performSearch);
            
            // 回车键搜索事件
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
            
            // 折叠/展开按钮事件
            collapseExpandBtn.addEventListener('click', function() {
                const headers = document.querySelectorAll('.region-header');
                let allCollapsed = true;
                
                // 检查当前状态
                headers.forEach(header => {
                    if (!header.classList.contains('collapsed')) {
                        allCollapsed = false;
                    }
                });
                
                // 根据当前状态切换
                headers.forEach(header => {
                    const content = document.getElementById(`${header.dataset.region}Content`);
                    if (!content) return;
                    
                    if (allCollapsed) {
                        // 全部展开
                        header.classList.remove('collapsed');
                        content.classList.remove('collapsed');
                        header.querySelector('i').style.transform = 'rotate(0deg)';
                    } else {
                        // 全部折叠
                        header.classList.add('collapsed');
                        content.classList.add('collapsed');
                        header.querySelector('i').style.transform = 'rotate(-90deg)';
                    }
                });
                
                // 更新按钮图标
                this.querySelector('i').className = allCollapsed ? 'fas fa-compress-alt' : 'fas fa-expand-alt';
            });
            
            // 回到顶部按钮事件
            backToTopBtn.addEventListener('click', scrollToTop);
            
            // 提示按钮事件 - 优化版
            hintBtn.addEventListener('click', function(e) {
                e.stopPropagation(); // 阻止事件冒泡
                hintPanel.classList.toggle('show');
                
                // 清除之前的定时器
                if (hintTimeout) {
                    clearTimeout(hintTimeout);
                }
                
                // 如果提示框显示，设置5秒后自动隐藏
                if (hintPanel.classList.contains('show')) {
                    hintTimeout = setTimeout(() => {
                        hintPanel.classList.remove('show');
                    }, 5000);
                }
            });
            
            // 点击页面其他地方关闭提示框
            document.addEventListener('click', function(e) {
                if (!hintBtn.contains(e.target) && 
                    !hintPanel.contains(e.target) && 
                    hintPanel.classList.contains('show')) {
                    hintPanel.classList.remove('show');
                }
            });
        }
        
        // 执行搜索（跳转）
        function performSearch() {
            const query = document.getElementById('searchInput').value.trim();
            if (!query) return;
            
            // 隐藏建议框
            document.getElementById('suggestionsContainer').style.display = 'none';
            
            // 处理港澳台简称
            const keywordMap = {
                "香港": "中国香港",
                "澳门": "中国澳门",
                "台湾": "中国台湾"
            };
            
            const searchQuery = keywordMap[query] || query;
            
            // 检查是否匹配某个项目
            const match = allDestinations.find(dest => {
                return (
                    (dest.name && dest.name.toLowerCase() === searchQuery.toLowerCase()) ||
                    (dest.en && dest.en.toLowerCase() === searchQuery.toLowerCase())
                );
            });
            
            if (match) {
                // 清除所有高亮
                clearAllHighlights();
                
                // 添加高亮
                match.element.classList.add('highlight');
                
                // 展开所在区域
                expandRegion(match.element);
                
                // 滚动到该元素
                scrollToElement(match.element);
                
                // 3秒后移除高亮
                setTimeout(() => {
                    match.element.classList.remove('highlight');
                }, 3000);
            } else {
                // 没有匹配项，显示提示
                alert(`没有找到与 "${query}" 匹配的目的地。请尝试从下拉列表中选择一个目的地。`);
            }
        }

        // 滚动到元素位置
        function scrollToElement(element) {
            element.scrollIntoView({ 
                behavior: 'smooth', 
                block: 'center',
                inline: 'nearest'
            });
        }
        
        // 滚动到顶部
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', initPage);
    </script>
</body>
</html>
